function formatNum(a) { if (a = (a += "").replace(/\,/g, "."), a = parseFloat(a), !isNaN(a)) return a.toFixed(2).replace(/\./g, ",") } function toNum(a) { return a = (a += "").replace(/\,/g, "."), a = parseFloat(a) } function removeExtra(a) { return a = (a = (a = (a = (a = a.replace(/\./g, "")).replace(/\-/g, "")).replace(/\//g, "")).replace(/\(/g, "")).replace(/\)/g, "") } function checkLangWidth() { var a; $(window).width() < 950 || (a = 0, $(".selecao-linguas__lista").show(), $(".selecao-linguas__ext").each(function () { $(this).width() > a && (a = $(this).width()) }), $(".selecao-linguas__lingua").width(a), $(".selecao-linguas__lista").hide()) } function create_sticky(t, a, e) { var o, s, i, r; e = e || !1, 0 < t.length && (o = a.offset().top, s = $(window), i = t.height(), r = t.width(), o++, s.on("ready load scroll", function () { o = a.offset().top, s.width() < 768 ? (t.addClass("fixed"), t.css({ width: "100%" })) : s.scrollTop() >= o ? (t.addClass("fixed"), a.height(i), e && t.width(r)) : (t.removeClass("fixed"), a.height(0), e && t.css({ width: "auto" })) }), e && (s.width() < 768 ? t.css({ width: "100%" }) : s.on("resize", function () { t.css({ width: "auto" }); var a = t.parent().width(); t.width(a) }))) } function scrollTo(a) { scroll_to = a.offset().top, $("html, body").animate({ scrollTop: scroll_to }, 1e3) } !function () { $("a[rel='external']").click(function () { return window.open($(this).attr("href")), !1 }), $("a.voltar").click(function () { return history.back(), !1 }), $(".js-gdpr-close").click(function () { $.post(baseurl + "politica_privacidade/gdpr_aceite", {}, function () { $("#gdpr-consent-banner").remove() }) }), $(".selecao-linguas__selecao").on("click", function () { $(".selecao-linguas__lista").toggle() }), $(".selecao-moedas__selecao").on("click", function () { $(".selecao-moedas__lista").toggle() }), $(document).on("ready", function () { checkLangWidth() }), $(window).on("resize", function () { checkLangWidth() }), $(".voltar-site").click(function () { return confirm("Cancelar a compra e voltar para o site da AMP Travels ?") }), $("body").on("blur", ".input-limpa", function () { $(this).val(removeExtra($(this).val()).toUpperCase()) }), $(".minha-conta__menu-trigger").click(function () { $(".minha-conta__menu-lista").toggle(), $(".minha-conta__menu-lista").is(":visible") ? $(this).hide() : $(this).show() }), $(document).ready(function () { function s(a) { return 11 === a.replace(/\D/g, "").length ? "(00) 0 0000-0000" : "(00) 0000-00009" } var a = { onKeyPress: function (a, t, e, o) { e.mask(s.apply({}, arguments), o) } }; $(".mask-phone").mask(s, a); function i(a) { switch (parseInt(this.ddi_value)) { case 30: case 274: case 518: return 11 === a.replace(/\D/g, "").length ? "(00) 0 0000-0000" : "(00) 0000-00009"; default: return "00000000000000" } } var t = { onKeyPress: function (a, t, e, o) { var s = e.attr("name").replace(/fone/g, "sl-ddi"); void 0 !== e.attr("data-name") && (s = e.attr("data-name").replace(/fone/g, "sl-ddi")); s = $("#" + s).val(); e.mask(i.apply({ ddi_value: s }, arguments), o) } }, e = { changeMaskIntl: function () { var a = $(this).attr("id").replace(/sl-ddi/g, "fone"), a = $("." + a); a.mask(i.apply({ ddi_value: $(this).val() }, [a.val()]), t) } }; $(".mask-phone-intlddi").on("change", e.changeMaskIntl), $(".mask-phone-intl").mask(i, t), $(".mask-phone-intlddi").each(function (a, t) { e.changeMaskIntl.call($(this)) }); a = { onKeyPress: function (a, t, e, o) { var s = ["0000 0000 0000 0000", "0000 000000 00000"]; a.match(/^3[47]/) ? (mask = s[1], $(".mask-cvc").mask("9999")) : (mask = s[0], $(".mask-cvc").mask("999")), $(".mask-cartao").mask(mask, o) } }; $(".mask-cartao").mask("0000 0000 0000 0000", a), $(".mask-cpf").mask("000.000.000-00"), $(".mask-cnpj").mask("00.000.000/0000-00"), $(".mask-cep").mask("00000-000"), $(".mask-data").mask("00/00/0000"), $(".mask-data-mes").mask("00/00") }); var a = 1e3, t = 3e3 + 1e3 * $(".pop-up").length; $($(".pop-up").get().reverse()).each(function () { $(this).delay(a).animate({ opacity: 1, bottom: 0 }, 500).delay(t).fadeOut(), a += 1e3, t -= 1e3 }) }(); const config = { rootMargin: "0px 0px 50px 0px", threshold: 0 }; function preloadImage(a) { var t = a.getAttribute("data-src"); t && (a.src = t) } let observer = new IntersectionObserver(function (a, t) { a.forEach(a => { a.isIntersecting && (preloadImage(a.target), t.unobserve(a.target)) }) }, config); const imgs = document.querySelectorAll("[data-src]"); imgs.forEach(a => { observer.observe(a) }), function () { var i, t, r = 1, c = 0, n = '<div class="passo__carregando a-centro"><i class="fas fa-pulse fa-spinner fa-2x"></i></div>', p = $('input[name="pid"]').val(), e = [], a = $(".passo__passageiros-seletor"), o = $(".passo__passageiros-mais"), s = $(".passo__passageiros-menos"), d = $(".passo__passageiros-numero"), l = $("#numpass"), u = toNum(a.attr("data-numpass-min")) || 1, h = toNum(a.attr("data-numpass-max")); 0 < (a = toNum(a.attr("data-numpass-sessao"))) && (r = a); var a = $(".grupo-servico__label"), m = $(".grupo-servico__input"), f = $(".servico-principal"), v = $(".rd-servico-principal"), g = $(".passo__servicos-principais-abrir"), _ = $("#servico-principal__detalhes"), k = ($(".servico-adicional"), $(".rd-servico-adicional"), $("#servicos-adicionais")), b = $(".mensagem--erro-fatorpass"), w = $(".passo__formas-pagamento"), x = $(".promocode__input"), y = $(".promocode__botao"), C = $(".pacote__servico-principal"), I = $(".pacote__servicos-adicionais"), N = $(".pacote__formas-pagamento-cupom"), j = $(".pacote__descricao-galeria-mapa"), T = $(".pacote__observacoes-roteiro"); function D() { I.hide(), b.hide(), N.hide(), v.prop("checked", !1), f.hide().removeClass("ativo"), g.hide(), _.hide(), c = null, $("#resumo__valor-passageiro").empty(), A() } function A() { $(document).find(".servico-principal__info.servico-principal-produto").empty(), $(document).find(".servico-principal__detalhes").empty() } function P(a) { r = toNum(d.text()), isNaN(r) && (r = 1); var t = r + a; t <= h && u <= t && (r += a, l.val(r), d.text(r), $.post(baseurl + "pacotes/numpassajax", { numpass: r, servprin: c, product: E(), selectedDates: M() }, function () { D(), m.each(function () { 1 == $(this).prop("checked") && (i = $(this).attr("data-grupo"), q()) }) })) } function q() { C.fadeIn("fast"), j.fadeIn("fast"), T.fadeIn("fast"), F() } function F() { $(".servico-principal__grupo-" + i).fadeIn("fast") } function z(a) { c && !a && (e = [], $(document).find(".rd-servico-adicional").each(function () { 1 == $(this).prop("checked") && e.push($(this).val()) }), w.html(n), $("#resumo__valor-passageiro").html(n), $.post(baseurl + "pacotes/getformapagajax", { pacote: p, grupo: i, product: E(), servprin: c, servadic: e, selectedDates: M(), numpass: l.val() }, function (a) { $(".pacote__formas-pagamento-cupom").show(), a ? (w.html(a), $("#resumo__valor-passageiro").html($("#valor-passageiro").html()), $("#resumo__valor-passageiro").addClass("mt")) : w.html("<p>Nenhuma forma de pagamento encontrada.</p>") })) } function E() { var a = $(document).find(".rd-servico-principal-produto:checked").attr("data-product"); return console.log("Product ID: ", a), a } function M() { var t = $(".rd-servico-principal-data:checked"); let e = []; for (let a = 0; a < t.length; a++)e.push({ date: $(t[a]).val(), price: $(t[a]).attr("data-price"), product: E }); return e } o.click(function () { P(1) }), s.click(function () { P(-1) }), a.click(function () { i = $(this).attr("data-grupo"), D(), $.post(baseurl + "pacotes/grupoajax", { grupo: i }), q(), scrollTo(C) }), f.click(function () { var a = $(this).find("input"), t = $(this).attr("id"), e = a.val(), o = a.attr("data-fatorpass"); if (b.hide(), a.prop("checked")) { f.removeClass("ativo"); var s, o = r / o; if (1 != o && o != r) return a.prop("checked", !1), void b.appendTo($(this)).fadeIn("fast"); c = e, $(document).find('input[name="servprinproduto"]').val(E()), $(this).addClass("ativo"), f.not("#" + t).fadeOut("fast"), g.fadeIn("fast"), s = a.hasClass("skip-adicionais"), _.show().html(n), $.post(baseurl + "pacotes/getservprinajax", { pacote: p, grupo: i, servprin: c, product: E(), numpass: l.val() }, function (a) { var t; a ? (_.html(a), s || (I.fadeIn("fast"), N.fadeIn("fast"), c && !t && (k.html(n), $.post(baseurl + "pacotes/getservadicajax", { pacote: p, grupo: i, servprin: c, numpass: l.val(), product: E() }, function (a) { a ? (k.html(a), $(".rd-servico-adicional"), z()) : k.html("<p>Nenhum serviço adicional encontrado.</p>") })), z())) : _.html("<p>Nenhuma informação localizada.</p>") }), z(a.hasClass("skip-adicionais")), scrollTo(C) } }), g.click(function () { F(), A(), $(this).fadeOut("fast"), $(document).find(".pacote__servicos-adicionais").hide(), $(document).find(".pacote__formas-pagamento-cupom").hide() }), I.on("click", ".servico-adicional", function () { var a, t, e, o = $(this).find("input"); o.prop("disabled") || (a = o.attr("data-grupo"), (e = 1) == a ? (e = o.attr("data-numpass"), t = [], $('input[data-grupo="1"]').each(function () { $(this).prop("checked") && $(this).attr("data-numpass") == e && t.push($(this).val()) })) : (t = o.val(), e = o.attr("data-numpass")), $.post(baseurl + "pacotes/savesessionajax", { servico: t, grupo: a, tipo: "adicional", product: E(), numpass: e }, function () { z() })) }), y.click(function (a) { t = x.val(), y.removeClass("promocode--sucesso"), y.removeClass("promocode--falha"), "" != t && null != t && t && (y.html('<i class="fas fa-pulse fa-spinner"></i>'), $.post(baseurl + "pacotes/aplicapromocodeajax", { promocode: t, product: E() }, function (a) { "sucesso" == a.status ? (y.addClass("promocode--sucesso"), y.html('<i class="fas fa-check"></i>')) : (y.addClass("promocode--falha"), y.html('<i class="fas fa-times"></i>'), window.setTimeout(function () { y.removeClass("promocode--falha"), y.html("Aplicar") }, 2e3)) }, "json")), a.preventDefault() }), C.hide(), I.hide(), N.hide(), b.hide(), j.hide(), T.hide(), m.each(function () { 1 == $(this).prop("checked") && (i = $(this).attr("data-grupo"), q()) }), v.each(function () { 1 == $(this).prop("checked") && $(this).trigger("click") }), create_sticky($("#resumo"), $("#resumo-ph"), !0), D(), F() }(), function () { var o = $(".pais").val(), s = 0, i = 0, t = !1, r = 0, a = $("#rav"); function e(a) { var t = a.val(), e = a.attr("data-pass"); 30 == o && $(".rg-" + e + " .pass-cpf").attr("required", "true"), "passaporte" == t ? (a = e, $(".rg-" + a).hide(), $(".cert-" + a).hide(), $(".ps-" + a).show(), $(".rg-" + a + " .pass-cpf").removeAttr("required")) : "certidao" == t ? (t = e, $(".rg-" + t).hide(), $(".cert-" + t).show(), $(".ps-" + t).hide(), $(".rg-" + t + " .pass-cpf").removeAttr("required")) : (e = e, $(".rg-" + e).show(), $(".cert-" + e).hide(), $(".ps-" + e).hide(), 30 != o && $(".nacional").hide()) } function c() { s = 0; var a = $("#servprin"), t = parseFloat(a.data("valor")) * parseInt(a.data("quantidade")); s += t += r, $(".rd-servico-adicional").each(function () { var a; $(this).prop("checked") && (a = parseFloat($(this).data("valor")), isNaN(a) || (s += a)) }), i && (s -= i), s <= 0 && (s = 0); a = "R$ " + formatNum(s), t = $(".taxa-servico-campo").html(); $(".valor-passageiro__valor").text(a), $(".valor-passageiro__taxa-servico").html(t); t = $("#cotacao-usd"); 0 != t.length && (e = s / t.attr("data-valor"), t.html(t.attr("data-simbolo") + " " + formatNum(e))); var e = $("#cotacao-eur"); 0 != e.length && (o = s / e.attr("data-valor"), e.html(e.attr("data-simbolo") + " " + formatNum(o))); var o, e = $("#cotacao-geral"); 0 != e.length && (o = s * e.attr("data-valor"), e.html(e.attr("data-simbolo") + " " + formatNum(o))) } $("body").on("change", ".sl-documento", function () { e($(this)) }), a.blur(function () { var a = $(this).val(); isNaN(a) && (a = 0), r = a, c() }), $(".botao--processar").click(function (a) { return t ? (a.preventDefault(), !1) : ($(this).removeClass("botao--comprar"), $(this).addClass("botao--processando"), $(this).html("<i class='fas fa-pulse fa-spinner'></i> Processando..."), void (t = !0)) }), $(".sl-documento").each(function () { e($(this)) }), c(), $(document).ready(function () { $(".change-phone-intlddi").change(function () { var a = $(this).attr("data-passageiro"), t = $(this).children("option:selected").attr("data-ddi"); $("#passageiro2_" + a + "_fone").val(t + " " + $("#passageiro_" + a + "_fone").val()), $("#passageiro_" + a + "_fone").focus() }), $(".pass-fone").change(function () { var a = $(this).attr("data-passageiro"), t = $("#sl-ddi" + a + " option:selected").attr("data-ddi"); $("#passageiro2_" + a + "_fone").val(t + " " + $(this).val()) }) }), create_sticky($("#resumo"), $("#resumo-ph"), !0) }(), function () { var r, t = $(".formas-pagamento"), c = $(".lista-pagamento__item"), a = $(".lista-pagamento__grid"), e = $(".rd-formapag"), o = $(".lista-pagamento__parcelas-select"), s = $(".pagamento-cartao"), n = $(".formas-pagamento-abrir"), i = $(".campo-servico"), p = $(".campo-taxa-servicos"), d = $(".campo-valor--principal"); function l(a) { var t = a.find(".lista-pagamento__parcelas-select"), e = a.find(".rd-formapag"), o = a.find(".lista-pagamento__checkbox").attr("data-taxa-servico"), s = a.find(".lista-pagamento__checkbox").attr("data-taxa-servico-moeda"), i = a.find(".lista-pagamento__checkbox").attr("data-taxa-servico-valor"); e.prop("checked", !0), a.attr("data-ativo", 1), t.show(), t.css({ opacity: 1 }), t.prop("disabled", !1), r = e.val(), c.hide(), a.show(), n.fadeIn("fast"), $(".campo-servico").addClass("esconde"), p.html("-"), "" != o && ($(".campo-servico").removeClass("esconde"), $(".campo-taxa-servicos").html(s + " " + o), d.html(s + " " + i)) } function u() { c.attr("data-ativo", 0), o.prop("disabled", !0), o.css({ opacity: 0 }), o.hide(), s.hide(), c.fadeIn("fast"), n.hide(), i.addClass("esconde"), p.html("-"), d.html(d.attr("data-valor-principal")), r = void 0 } a.click(function (a) { $(this).parent().find(".rd-formapag").val() != r && (u(), l($(this).parent()), scrollTo(t), a.preventDefault()) }), o.click(function (a) { a.stopPropagation() }), o.change(function () { var a = $(this).val(), t = $("#" + $(this).attr("data-parent")), e = 1; 0 < $("#atualizar_pagamento").length && "offline" != $(this).attr("data-processador") && (e = 0), 1 == $(this).attr("data-desabilita-dados-cartao") && (e = 0), "" != a && (a = t.find(".lista-pagamento__conteudo"), t.hasClass("fp-credito") && e && s.appendTo(a).fadeIn("fast")) }), n.click(function () { u() }), s.hide(), n.hide(), o.hide(), e.each(function () { var a; 1 == $(this).prop("checked") && (a = $(this).attr("data-forma-pagamento"), l($("#forma-pagamento" + a))) }) }();
